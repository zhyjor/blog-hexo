---
title: http使用探索之四：你了解DNS吗
tags:
  - http使用探索
categories: http
top: false
copyright: true
date: 2018-11-13 17:37:52
---
DNS 是互联网核心协议之一。不管是上网浏览，还是编程开发，都需要了解一点它的知识。
<!--more-->
## DNS 是什么？
网络通讯大部分是基于TCP/IP的，而TCP/IP是基于IP地址的，所以计算机在网络上进行通讯时只能识别如“202.96.134.133”之类的IP地址，而不能认识域名。我们无法记住10个以上IP地址的网站，所以我们访问网站时，更多的是在浏览器地址栏中输入域名，就能看到所需要的页面，这是因为有一个叫“DNS服务器”的计算机自动把我们的域名“翻译”成了相应的IP地址，然后调出IP地址所对应的网页。

DNS( Domain Name System)是“域名系统”的英文缩写，是一种组织成域层次结构的计算机和网络服务命名系统，它用于TCP/IP网络，它所提供的服务是用来将主机名和域名转换为IP地址的工作。

## DNS 的过程
DNS是应用层协议，事实上他是为其他应用层协议工作的，包括不限于HTTP和SMTP以及FTP，用于将用户提供的主机名解析为ip地址。
具体过程如下：
* 用户主机上运行着DNS的客户端，就是我们的PC机或者手机客户端运行着DNS客户端了
* 浏览器将接收到的url中抽取出域名字段，就是访问的主机名,并将这个主机名传送给DNS应用的客户端
* DNS客户机端向DNS服务器端发送一份查询报文，报文中包含着要访问的主机名字段（中间包括一些列缓存查询以及分布式DNS集群的工作）
* 该DNS客户机最终会收到一份回答报文，其中包含有该主机名对应的IP地址
* 一旦该浏览器收到来自DNS的IP地址，就可以向该IP地址定位的HTTP服务器发起TCP连接

## DNS服务的体系架构
DNS domain name system 主要作用就是将主机域名转换为ip地址

假设运行在用户主机上的某些应用程序（如Webl浏览器或者邮件阅读器）需要将主机名转换为IP地址。这些应用程序将调用DNS的客户机端，并指明需要被转换的主机名。（在很多基于UNIX的机器上，应用程序为了执行这种转换需要调用函数gethostbyname（））。用户主机的DNS客户端接收到后，向网络中发送一个DNS查询报文。所有DNS请求和回答报文使用的UDP数据报经过端口53发送（至于为什么使用UDP，请参看为什么域名根服务器只能有13台呢？ - 郭无心的回答）经过若干ms到若干s的延时后，用户主机上的DNS客户端接收到一个提供所希望映射的DNS回答报文。这个查询结果则被传递到调用DNS的应用程序。因此，从用户主机上调用应用程序的角度看，DNS是一个提供简单、直接的转换服务的黑盒子。但事实上，实现这个服务的黑盒子非常复杂，它由分布于全球的大量DNS服务器以及定义了DNS服务器与查询主机通信方式的应用层协议组成。

**DNS服务器一般分三种，根DNS服务器，顶级DNS服务器，权威DNS服务器。**



**参考资料**
[域名”A记录，MX记录，CNAME记录,TTL值,URL转发”解释](http://www.cnblogs.com/yooplmqj/archive/2008/04/17/1158902.html)
[A记录和CNAME记录的区别](http://blog.xieyc.com/differences-between-a-record-and-cname-record/)
[DNS 原理入门 阮一峰](http://www.ruanyifeng.com/blog/2016/06/dns.html)
![](http://oankigr4l.bkt.clouddn.com/wexin.png)